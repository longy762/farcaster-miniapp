<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Farcaster 手機 Mini App</title>
  <script src="https://unpkg.com/@farcaster/miniapp-sdk@latest"></script>

  <!-- Open Graph -->
  <meta property="og:title" content="Farcaster 手機 Mini App 🚀" />
  <meta property="og:description" content="點我登入 Farcaster，然後發一則 Cast！用手機 5 分鐘完成！" />
  <meta property="og:image" content="https://picsum.photos/1200/630?random=123" />
  <meta property="og:url" content="https://farcaster-miniapp-flame.vercel.app" />
  <meta property="og:type" content="website" />

  <!-- 這一行是關鍵！ -->
  <meta property="fc:frame" content="vNext" />
</head>

  <!-- 你的 UI -->
  <div style="padding:20px; font-family:sans-serif; text-align:center; background:#f5f3ff; min-height:100vh;">
    <h1 style="color:#8b5cf6;">哈囉 Farcaster！</h1>
    <div id="login">
      <button onclick="login()" style="padding:14px 28px; font-size:16px; background:#8b5cf6; color:white; border:none; border-radius:12px; cursor:pointer;">
        登入 Farcaster
      </button>
    </div>
    <div id="profile" style="display:none; margin-top:20px;">
      <p style="font-weight:bold; color:#6d28d9;">歡迎，<span id="name"></span>！</p>
      <button onclick="cast()" style="padding:12px 24px; background:#10b981; color:white; border:none; border-radius:10px; cursor:pointer;">
        發一則 Cast
      </button>
    </div>
  </div>

  <script>
    async function login() {
      try {
        const { user } = await window.farcaster.signIn();
        if (user) {
          document.getElementById('login').style.display = 'none';
          document.getElementById('profile').style.display = 'block';
          document.getElementById('name').textContent = user.displayName || user.fid;
        }
      } catch (e) {
        alert("登入失敗：" + e.message);
      }
    }

    async function cast() {
      try {
        await window.farcaster.cast("我在手機上用 CodePen 寫了 Farcaster Mini App！太酷了吧 🚀\n#Farcaster #MiniApp");
        alert("Cast 已發送！");
      } catch (e) {
        alert("發送失敗：" + e.message);
      }
    }
  </script>
</body>
</html>
    
  </body>
  
</html>
