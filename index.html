<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Flame Mini App</title>
  <script src="https://unpkg.com/@farcaster/miniapp-sdk@latest"></script>

  <!-- 必須的 Open Graph -->
  <meta property="og:title" content="Flame Mini App" />
  <meta property="og:description" content="手機開發的 Farcaster Mini App，點我登入 + 發 Cast！" />
  <meta property="og:image" content="https://picsum.photos/1200/630?random=flame" />
  <meta property="og:url" content="https://farcaster-miniapp-flame.vercel.app" />
  <meta property="og:type" content="website" />

  <!-- 關鍵：Farcaster Frame 標籤 -->
  <meta property="fc:frame" content="vNext" />
  <meta property="fc:frame:image" content="https://picsum.photos/1200/630?random=flame" />
  <meta property="fc:frame:button:1" content="登入 Farcaster" />
  <meta property="fc:frame:button:1:action" content="post" />
</head>
<body style="margin:0; padding:20px; font-family:system-ui; background:linear-gradient(135deg,#ff6b6b,#ffa500); min-height:100vh; text-align:center;">
  <div style="max-width:400px; margin:auto; background:white; border-radius:20px; padding:30px; box-shadow:0 10px 30px rgba(0,0,0,0.1);">
    <h1 style="color:#c41e3a;">Flame Mini App</h1>
    <div id="login">
      <button onclick="login()" style="width:100%; padding:16px; background:#e63946; color:white; border:none; border-radius:12px; font-weight:bold;">
        登入
      </button>
    </div>
    <div id="profile" style="display:none;">
      <p>歡迎，<strong id="name"></strong>！</p>
      <button onclick="cast()" style="width:100%; padding:14px; background:#2a9d8f; color:white; border:none; border-radius:10px; font-weight:bold;">
        發 Cast
      </button>
    </div>
  </div>

  <script>
    async function login() {
      const { user } = await window.farcaster.signIn();
      if (user) {
        document.getElementById('login').style.display = 'none';
        document.getElementById('profile').style.display = 'block';
        document.getElementById('name').textContent = user.displayName;
      }
    }
    async function cast() {
      await window.farcaster.cast("Flame Mini App 上線！手機開發超簡單！");
      alert("Cast 已發送！");
    }
  </script>
</body>
</html>
